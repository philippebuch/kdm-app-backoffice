/*!
 * RVO v0.1.0 Core js file 
 * Last modification: 2022/09/28
 * Author: Cellenza
 */

function dropInputTrigger(o,e){e.querySelector(".rvo-dropzone-input input").click()}function getFilesName(o){var e=o.querySelector(".rvo-dropzone-input input");if(0<e.files.length)for(var t=0;t<e.files.length;t++){var s=e.files.item(t);o.querySelector(".rvo-dropfiles").insertAdjacentHTML("beforeend",'<div class="rvo-file"><span class="rvo-icon-attachement"></span><span class="rvo-file-name">'+s.name+'</span><button class="rvo-file-delete" onclick="removeFile(this);"></button></div>')}}function dropOnDrop(o,e){o.preventDefault();var t=o.dataTransfer;if(t.items)for(var s=0;s<t.items.length;s++){var n=t.items[s],r=e.querySelector(".rvo-dropfiles");"file"!=n.kind||"application/pdf"!=n.type&&"text/csv"!=n.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=n.type?(n=n.getAsFile(),r.insertAdjacentHTML("beforeend",'<div class="rvo-file rvo-invalid"><span class="rvo-icon-attachement"></span><span class="rvo-file-name">'+n.name+"</span><i>Ce type de fichier n'est pas accepté</div>")):(n=n.getAsFile(),r.insertAdjacentHTML("beforeend",'<div class="rvo-file"><span class="rvo-icon-attachement"></span><span class="rvo-file-name">'+n.name+'</span><button class="rvo-file-delete" onclick="removeFile(this);"></button></div>'))}e.querySelector(".rvo-dropzone").classList.remove("rvo-ondrop")}function dropOnDragHover(o,e){o.preventDefault(),e.querySelector(".rvo-dropzone").classList.add("rvo-ondrop");o.dataTransfer}function dropOnDragLeave(o,e){o.preventDefault(),e.querySelector(".rvo-dropzone").classList.remove("rvo-ondrop")}function dropOnDragEnd(o){var e=o.dataTransfer;if(e.items)for(var t=0;t<e.items.length;t++)e.items.remove(t);document.querySelector(".rvo-dropzone").classList.remove("rvo-ondrop")}function removeFile(o){o.parentElement.remove()}$.when($.ready).then(function(){const n="rvo-opened",o=$(".rvo-field input, .rvo-field textarea"),e="rvo-focused";o.on("focusin",function(){$(this).closest(".rvo-field").addClass(e)}),o.on("focusout",function(){$(this).closest(".rvo-field").removeClass(e)});const t=$("#rvo-mainnav"),s=$("#rvo-mainnav-trigger");s.on("click",function(){$("ul",t).toggleClass(n),$(this).toggleClass(n)}),t.on("click",function(o){o.stopPropagation()}),$("body").on("click",function(){$("ul",t).removeClass(n),s.removeClass(n)});const r=$("#rvo-user-nav"),l=$("#rvo-user-image");l.on("click",function(){r.toggleClass(n)}),$("#rvo-user").on("click",function(o){o.stopPropagation()}),$("body").on("click",function(){r.removeClass(n)}),$(".rvo-ddown-trigger").on("click",function(o){const e=$(this);return e.closest(".rvo-ddown").stop().toggleClass(n),e.closest(".rvo-stickycol").stop().toggleClass("rvo-has-opened-elems"),!1}),$(".rvo-ddown-target").on("click",function(o){o.stopPropagation()}),$('.rvo-ddown:not(".rvo-isfilter") .rvo-ddown-item').on("click",function(){$(this).closest(".rvo-ddown").find(".rvo-current").removeClass("rvo-current"),$(this).closest(".rvo-stickycol").stop().toggleClass("rvo-has-opened-elems"),$(this).addClass("rvo-current").closest(".rvo-ddown").stop().toggleClass(n).find(".rvo-ddown-trigger-text").text($(this).text()),$(this).find(".rvo-item-radio")&&$(this).closest(".rvo-ddown").find(".rvo-ddown-trigger-text").prepend('<span class="rvo-trigger-radio">')}),$("body").on("click",function(){$(".rvo-ddown").removeClass(n)}),$(".rvo-autocomplete").each(function(){const o=$(this),e=$(this).closest(".rvo-field").find("input");e.on("focusin",function(){o.addClass(n)}),e.on("focusout",function(){o.removeClass(n)})}),$("[data-menu-trigger]").on("click",function(){var o=$(this).attr("data-menu-trigger");$(".rvo-menu").stop().removeClass(n),$('.rvo-menu[data-menu="'+o+'"]').stop().toggleClass(n)}),$("[data-menu-trigger]").on("click",function(o){o.stopPropagation()}),$("body").on("click",function(){$(".rvo-menu").removeClass(n)}),$(".rvo-icon-bookmark-fill").on("click",function(){$(this).toggleClass("rvo-selected")});const a=$(".rvo-tabs"),c=$(".rvo-tabs-nav"),d=$(".rvo-tabs-nav-item"),v=$(".rvo-tabs-panel"),f=$(".rvo-tabs-follower");function u(){$(".rvo-table-cell.rvo-stickycol").each(function(){let o=$(this);o.css("left","");var e=o.position();o.css("left",e.left)})}moveFollower=function(o){var e=o.position(),t=o.outerWidth();o.closest(a).find(f).css({left:e.left+40,width:t})},d.on("click",function(){const o=$(this),e=o.closest(a);e.find(d).removeClass(n),o.addClass(n),o.closest(a).find(v).removeClass(n),e.find(v).eq(o.index()).addClass(n),moveFollower(o)}),c.each(function(){const o=$(this);o.find(d).eq(0).addClass(n),o.closest(a).find(v).eq(0).addClass(n),moveFollower(o.find(d).eq(0))}),$(".rvo-modal").each(function(){var o=$(this),e=$(".rvo-modal-frame",o),t=$(".rvo-modal-close",o),s=o.data("modal");$('[data-modal-trigger="'+s+'"]').on("click",function(){o.addClass(n)}),o.on("click",function(){o.removeClass(n)}),t.on("click",function(){o.removeClass(n)}),e.on("click",function(o){o.stopPropagation()})}),u(),$(window).resize(function(){console.log("resize"),u()}),$(".rvo-table-cell-toggle button").on("click",function(){let o=$(this).closest("tr");var e=o.attr("data-row-toggle");o.toggleClass(n),$('.rvo-table-row-target[data-row-toggle="'+e+'"]').toggleClass(n);e=$(this).attr("title");$(this).attr("title","Afficher les détails"==e?"Masquer les détails":"Afficher les détails")}),$(".rvo-table-header-sort").on("click",function(){let o=$(this);o.hasClass("rvo-descending")?o.removeClass("rvo-descending").addClass("rvo-ascending"):o.hasClass("rvo-ascending")?o.removeClass("rvo-ascending"):o.addClass("rvo-descending")}),$(".rvo-snackbar-close button").on("click",function(){$(this).closest(".rvo-snackbar").remove()}),$('[data-filter-toggle="open"]').on("click",function(){$(this).hide(),$(".rvo-filters-active").hide(),$(".rvo-filters-ddowns").show(),$('[data-filter-toggle="close"]').show()}),$('[data-filter-toggle="close"]').on("click",function(){$(this).hide(),$(".rvo-filters-active").show(),$(".rvo-filters-ddowns").hide(),$('[data-filter-toggle="open"]').show()}),$(".rvo-ddown-item label").on("click",function(){$('<button class="rvo-filter-tag"><span class="rvo-filter-tag-label">'+$(this).text()+'</span><span class="rvo-icon-delete"></span></button>').appendTo(".rvo-filters-tags"),0<$(".rvo-filters-tags").length?$(".rvo-filters-reset").show():$(".rvo-filters-reset").hide(),$(".rvo-filter-tag").on("click",function(){$(this).remove()})}),$(".rvo-filters-reset button").on("click",function(){$(this).hide(),$(".rvo-filter-tag").remove()});const p=$(".rvo-confirm input");function g(o){const e=$(".rvo-confirm .rvo-button");e.css("margin-left",o+"%")}p.on("input",function(){g(parseInt(p.val())),70==p.val()?$(".rvo-confirm").addClass("rvo-success"):$(".rvo-confirm").removeClass("rvo-success")}),p.on("change",function(){p.val()<70&&(p.val(0),g(0))});const m=document.querySelector(".rvo-slider-avatar"),h=m.querySelector(".rvo-slider-prev"),C=m.querySelector(".rvo-slider-next"),k=m.querySelector(".rvo-slider-items"),b=k.querySelectorAll(".rvo-slider-item"),w=b.length,y=b[0].offsetWidth;let q=0;function L(){for(0==q?(h.classList.add("rvo-disabled"),k.style.left=y*(q+1)+"px"):(h.classList.remove("rvo-disabled"),k.style.left=-y*(q-1)+"px"),q+1==w?C.classList.add("rvo-disabled"):C.classList.remove("rvo-disabled"),i=0;i<b.length;i++)b[i].classList.remove("rvo-current");b[q].classList.add("rvo-current")}L(),h.addEventListener("click",function(){q-=1,L()}),C.addEventListener("click",function(){q+=1,L()})});